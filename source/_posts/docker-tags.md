---
title: Docker - Docker Tags (æ¨™ç±¤)ä¸åªæ˜¯æ¨™ç±¤
tags:
  - Docker
  - éƒ¨ç½²
  - tag
comments: false
toc: true
cover: /image/docker.png
categories:
  - Docker
  - éƒ¨ç½²
date: 2023-09-22 01:24:12
---

åœ¨ Docker Container(å®¹å™¨) ç¯‡ï¼Œæˆ‘å€‘æ›¾çŸ­æš«çš„ä»‹ç´¹é Docker Tags ï¼Œä½†é‚£åªæ˜¯æœ€è¡¨é¢çš„ï¼Œä½†å…¶å¯¦ Docker Tags(æ¨™ç±¤) å®ƒä¸åªæ˜¯æ¨™ç±¤ï¼Œä»Šå¤©æˆ‘å€‘å°±ä¾†æ·±å…¥äº†è§£ä¸€ä¸‹ Docker Tags(æ¨™ç±¤) é‚„æœ‰å“ªäº›åŠŸç”¨å§ï¼Ÿ

å…ˆä¾†è¤‡ç¿’ä¸€ä¸‹ä¹‹å‰èªªåˆ°çš„ç•¶æˆ‘å€‘æƒ³è¦å•Ÿå‹•ä¸€å€‹ Container(å®¹å™¨) æ™‚ï¼Œæ‰“äº† `docker run ruby` æ™‚ï¼Œå› ç‚ºæœ¬åœ°æ²’æœ‰å«åš ruby çš„ Image(æ˜ åƒ) ï¼Œæ‰€ä»¥ä»–è‡ªå‹•å»é ç«¯å„²å­˜åº«æ‰¾ `ruby:latest` é€™å€‹ ruby Image(æ˜ åƒ)
ï¼Œä»¥åŠä½¿ç”¨é è¨­çš„ latest Tags(æ¨™ç±¤) ï¼Œæ‰€ä»¥æˆ‘å€‘äº†è§£åˆ°æˆ‘å€‘å¯ä»¥åœ¨ Docker Hub çœ‹åˆ°åŠé¸æ“‡ pull æˆ– run ä¸åŒ Tags(æ¨™ç±¤)çš„ ruby Image(æ˜ åƒ)ï¼Œä½†é€™äº›å…¶å¯¦éƒ½æ˜¯åœ¨ä½¿ç”¨åˆ¥äººå»ºå¥½çš„ Image(æ˜ åƒ) æˆ–æ˜¯ Tags(æ¨™ç±¤) ï¼Œå…¶å¯¦æˆ‘å€‘ä¹Ÿå¯ä»¥å»ºç«‹å±¬æ–¼è‡ªå·±çš„ Tags(æ¨™ç±¤) å‘¦ï¼

## å»ºç«‹è‡ªå·±çš„ Tags(æ¨™ç±¤)

é¦–å…ˆæˆ‘å€‘å¯ä»¥å…ˆä½¿ç”¨

```docker
docker images
```

çœ‹ä¸€ä¸‹è‡ªå·±ç¾åœ¨æœ¬æ©Ÿæ‰€æœ‰çš„ Image(æ˜ åƒ)

![çœ‹æœ¬æ©Ÿæ‰€æœ‰çš„ Images](/image/dockerDay7/7_1.png)

é€™é‚Šæˆ‘å€‘å¯ä»¥çœ‹åˆ°æœ‰ä¹‹å‰æˆ‘å€‘ run æ™‚ï¼Œå¾å…¬å…±å„²å­˜åº« pull ä¸‹ä¾†çš„ ruby Image(æ˜ åƒ) ï¼Œé€™æ™‚æˆ‘å€‘å¯ä»¥ä½¿ç”¨ä»¥ä¸‹èªæ³•ä¾†å»ºç«‹ä¸€å€‹æœ‰æ–°æ¨™ç±¤çš„ Image(æ˜ åƒ)

```docker
docker tag <æœ¬æ©Ÿç¾æœ‰æ˜ åƒ id_or_repository>:<æœ¬æ©Ÿç¾æœ‰æ¨™ç±¤> <æ–°æ˜ åƒ repository>:<æ–°æ¨™ç±¤>
```

![å»ºç«‹ä¸€å€‹æœ‰æ–°æ¨™ç±¤çš„ Image](/image/dockerDay7/7_2.png)

é€™å€‹èªæ³•æ˜¯ç‚ºæœ¬æ©ŸåŸæœ¬çš„ ruby Image(æ˜ åƒ)ï¼Œå»ºç«‹ä¸€å€‹æ–°çš„ Image(æ˜ åƒ) ï¼Œè€Œé€™å€‹ Image(æ˜ åƒ)æ˜¯æ–°çš„æ¨™ç±¤ `v1`ï¼Œæ‰€ä»¥ç•¶ä½ çœ‹ `docker images` æ™‚ï¼Œæœƒçœ‹åˆ°å…©å€‹ ruby Repository(å€‰åº«)ï¼Œä½†æ˜¯æ˜¯ä¸åŒ Tags(æ¨™ç±¤) - `latest` è·Ÿ `v1`ã€‚

å¦å¤–å»ºç«‹ Tags(æ¨™ç±¤) æˆåŠŸä¸¦ä¸æœƒæœ‰è¼¸å‡ºã€‚

ğŸ“ æ³¨æ„äº‹é …ï¼š
Tags(æ¨™ç±¤)å¯ä»¥åŒ…æ‹¬å­—æ¯ã€æ•¸å­—ã€æ©«ç·š(`-`)å’Œä¸‹åŠƒç·š(`_`)ï¼Œä½†ä¸å»ºè­°ä½¿ç”¨ç‰¹æ®Šç¬¦è™Ÿ(`.`ã€`:`ã€`/`ç­‰)ã€‚

æ–°çš„æ˜ åƒ repository è·Ÿæ–°æ¨™ç±¤åç¨±ç•¶ç„¶å¯ä»¥å–è‡ªå·±æ»¿æ„çš„åå­—ï¼Œå¦‚åœ–

![repository è·Ÿæ–°æ¨™ç±¤åç¨±å¯è‡ªè¨‚](/image/dockerDay7/7_3.png)

é€™æ™‚æˆ‘å€‘æœ‰å…©å€‹ä¸åŒ Tags(æ¨™ç±¤) çš„ ruby Image(æ˜ åƒ)ï¼Œè‹¥æ˜¯æˆ‘å€‘æƒ³å°‡ Tags(æ¨™ç±¤) ç‚º latest çš„ ruby Image(æ˜ åƒ) å»ºç«‹ä¸€å€‹æ–°çš„ myapp Repository(å€‰åº«) ä¸” Tags(æ¨™ç±¤) ç‚º latest æ™‚ï¼Œå› ç‚ºæ˜¯é»˜èªçš„ latest Tags(æ¨™ç±¤) ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ç°¡å¯«

```docker
docker tag <æœ¬æ©Ÿç¾æœ‰æ˜ åƒid_or_repository> <æ–°æ˜ åƒ repository>
```

![ä½¿ç”¨ç°¡å¯«å»ºç«‹æ–°çš„ Repository](/image/dockerDay7/7_4.png)

## å»ºç«‹ï¼‹æ¨é€(push)è‡ªå·±çš„ Tags(æ¨™ç±¤)

```docker
docker tag <æœ¬æ©Ÿç¾æœ‰æ˜ åƒid_or_repository> <Docker å„²å­˜åº«çš„ä¸»æ©Ÿåæˆ– IP åœ°å€>:<ç«¯å£>/<æ–°æ˜ åƒ repository>:<æ–°æ¨™ç±¤>
```

é€™å€‹æŒ‡ä»¤åŒ…å«å…©å€‹å‹•ä½œ

1. å°±æ˜¯æˆ‘å€‘ä¸Šé¢ä»‹ç´¹çš„å»ºç«‹æ–°çš„ Tags(æ¨™ç±¤)
2. é‚„åŒ…å«äº†å°‡é€™å€‹æ–° Tags(æ¨™ç±¤)çš„ Image(æ˜ åƒ)ï¼Œæ¨é€åˆ°æŒ‡å®šçš„ Docker å„²å­˜åº« (myregistryhost:5000) ä¸­ï¼Œä»¥ä¾¿åœ¨é ç«¯çš„ä¸»æ©Ÿä¸Šä½¿ç”¨æˆ–èˆ‡å…¶ä»–äººå…±äº«ã€‚

é‚£é€™éƒ¨åˆ†æˆ‘å€‘ä¹‹å¾Œä¹Ÿæœƒè©³è¨˜ä»‹ç´¹åˆ°ï¼Œä»Šå¤© Docker Tags(æ¨™ç±¤) å°±ä»‹ç´¹åˆ°é€™é‚Šå•¦ï½æˆ‘å€‘æ˜å¤©ç¹¼çºŒï¼
