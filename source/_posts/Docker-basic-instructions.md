---
title: Docker - åŸºæœ¬æŒ‡ä»¤
tags:
  - Docker
  - éƒ¨ç½²
comments: false
toc: true
cover: /image/docker.png
categories:
  - Docker
  - éƒ¨ç½²
date: 2023-09-18 00:31:03
---

æ˜¨å¤©æˆ‘å€‘åœ¨ Docker ä¸­æˆåŠŸè·‘ Hello World ï¼Œä»Šå¤©ä¾†äº†è§£ä¸€äº› Docker çš„åŸºæœ¬æŒ‡ä»¤

è¦çŸ¥é“ Docker æœ‰å“ªäº›æŒ‡ä»¤å¯ä»¥æ‰“çš„è©±ï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥åœ¨çµ‚ç«¯æ©Ÿä¸‹

```docker
docker
```

é€™å€‹æŒ‡ä»¤ï¼Œé€™æ™‚å¯ä»¥çœ‹åˆ°æ‰€æœ‰ docker å¯ä»¥ä¸‹çš„æŒ‡ä»¤
![docker å¯ä»¥ä¸‹çš„æŒ‡ä»¤](/image/dockerDay3/3_1.png)

å…¶ä¸­æˆ‘å€‘å¯ä»¥çœ‹åˆ°ä¸‰å¤§åˆ†é¡

### Optionsï¼ˆé¸é …ï¼‰ï¼š

æ˜¯ç”¨æ–¼è¨­å®š Docker åŸ·è¡Œç’°å¢ƒçš„å…¨åŸŸè¨­å®šã€‚
ä¾‹å¦‚ï¼š

```docker
docker --help
```

å¯ä»¥çœ‹åˆ° docker åˆ—è¡¨

```docker
docker -v
```

åŠ

```docker
docker --version
```

å¯ä»¥çœ‹åˆ°ç¾åœ¨ docker çš„ç‰ˆæœ¬

### Management Commandsï¼ˆç®¡ç†å‘½ä»¤ï¼‰ï¼š

é€™äº›å‘½ä»¤ç”¨æ–¼ç®¡ç† Docker å®¹å™¨ã€æ˜ åƒã€ç¶²çµ¡ã€‚
ä¾‹å¦‚ï¼š`docker container` å‘½ä»¤æ˜¯ç”¨ä¾†ç®¡ç†å®¹å™¨ ;
`docker image` å‘½ä»¤æ˜¯ç”¨ä¾†ç®¡ç†æ˜ åƒ ;
`docker network` å‘½ä»¤æ˜¯ç”¨ä¾†ç®¡ç†ç¶²çµ¡ã€‚
é€™äº›å‘½ä»¤èƒ½å‰µå»ºã€æŸ¥çœ‹ã€ä¿®æ”¹å’Œåˆªé™¤ Docker è³‡æºã€‚

### Commandsï¼ˆå‘½ä»¤ï¼‰ï¼š

é€™äº›æ˜¯ Docker åŸ·è¡Œçš„å¯¦éš›å‘½ä»¤ã€‚
ä¾‹å¦‚ï¼š`docker run` ç”¨æ–¼é‹è¡Œå®¹å™¨ï¼Œ`docker build` ç”¨æ–¼æ§‹å»ºæ˜ åƒï¼Œ`docker-compose up` ç”¨æ–¼å•Ÿå‹• Compose çš„é …ç›®ã€‚
é€™äº›å‘½ä»¤è®“ä½ åŸ·è¡Œç‰¹å®šçš„æ“ä½œï¼Œä¾‹å¦‚å‰µå»ºæ–°å®¹å™¨ã€æ§‹å»ºæ˜ åƒã€é‹è¡Œæœå‹™ç­‰ã€‚

ä»¥æ˜¨å¤©æ‰“éçš„ `docker run hello-world` å…¶å¯¦æ˜¯ `docker container run hello-world` çš„ç¸®å¯«ï¼Œé‚£å°‡é€™å¥è©±å°æ‡‰åˆ°ä¸Šé¢ï¼Œ**docker** æ˜¯ registry (å€‰åº«) ; **container** å°±æ˜¯ Management Commandsï¼ˆç®¡ç†å‘½ä»¤ï¼‰ï¼Œè¦`ç®¡ç†åŸ·è¡Œçš„æ±è¥¿`ï¼Œ **run** å°±æ˜¯ Commandsï¼ˆå‘½ä»¤ï¼‰ï¼Œæˆ‘è‡ªå·±æ˜¯æŠŠä»–æƒ³åƒæˆ `å‹•ä½œ` æˆ–æ˜¯ `åšä»€éº¼ï¼Ÿ` ï¼Œè‡³æ–¼ hello-world å°±æ˜¯ image åç¨±å•¦ã€‚

æ¥è‘—æˆ‘ä¾†ä»‹ç´¹æœƒç”¨åˆ°çš„ä¸€äº›å¸¸è¦‹æŒ‡ä»¤

```docker
docker container run hello-world
```

æˆ–æ˜¯

```docker
docker run hello-world
```

é€™å€‹ç›¸ä¿¡å‰é¢èªªæ˜çš„å¾ˆæ¸…æ¥šï¼Œå°±æ˜¯ä½¿ç”¨ hello-world é€™å€‹ image ï¼Œä¾†åŸ·è¡Œ Docker container

```docker
docker ps
```

ps æ˜¯ "process status" çš„ç¸®å¯«ï¼Œä¹Ÿå°±æ˜¯èªªé€™å€‹æŒ‡ä»¤å¯ä»¥åˆ—å‡ºæ­£åœ¨é€²è¡Œçš„å®¹å™¨ï¼Œé¡¯ç¤ºå®¹å™¨çš„ IDã€åç¨±ã€ç‹€æ…‹ã€ä½¿ç”¨çš„æ˜ åƒç­‰ã€‚å¯ä»¥å¿«é€ŸæŸ¥çœ‹å®¹å™¨çš„é‹è¡Œç‹€æ…‹ä»¥åŠç›¸é—œçš„è³‡è¨Šã€‚

è‹¥æ˜¯æƒ³çœ‹åˆ°å…¨éƒ¨ï¼Œç„¡è«–æ˜¯æ­£åœ¨é€²è¡Œçš„å®¹å™¨ï¼Œæˆ–æ˜¯å·²ç¶“åœæ­¢çš„å®¹å™¨æˆ‘å€‘å¯ä»¥ä¸‹

```docker
docker ps --all
```

æˆ–æ˜¯ä»–çš„ç¸®å¯«

```docker
docker ps -a
```

å¯ä»¥çœ‹åˆ°å…¨éƒ¨ç„¡è«–æ˜¯æ­£åœ¨é‹è¡Œçš„ï¼Œæˆ–æ˜¯å·²ç¶“åœæ­¢çš„ container
![](https://hackmd.io/_uploads/S1f4liJa2.png)

è¬›åˆ°åœæ­¢å°±é †é“ä¾†ä»‹ç´¹ä¸€ä¸‹ï¼Œæˆ‘å€‘ä½¿ç”¨ run ä¾†å•Ÿå‹•å®¹å™¨ï¼Œåä¹‹å°±è¦å¯ä»¥åœæ­¢ container é‹è¡Œ

```docker
docker container stop hello-world
```

æˆ–æ˜¯

```docker
docker stop hello-world
```

é€™å…©å€‹æŒ‡ä»¤å¯ä»¥è§£é‡‹ç‚ºåœæ­¢åç‚º "hello-world" çš„ Docker å®¹å™¨ã€‚

è¬›åˆ°é€™äº›ä½†æˆ‘å€‘çš„ hello-world é€™å€‹ image æ˜¯å“ªä¾†çš„å‘¢ï¼Ÿ

```docker
docker build .
```

åœ¨ç•¶å‰çš„ç›®éŒ„ä¸­å°‹æ‰¾åç‚º Dockerfile çš„æª”æ¡ˆï¼Œç„¶å¾Œä½¿ç”¨é€™å€‹ Dockerfile å»ºç«‹ä¸€å€‹ Docker æ˜ åƒï¼ˆimageï¼‰ã€‚ä½†å› ç‚ºæŠ¹æ²’æœ‰ç‰¹åˆ¥æŒ‡å®šåç¨±å’Œæ¨™ç±¤ï¼Œæ‰€ä»¥é€™å€‹ image æœƒä½¿ç”¨ä¸€å€‹éš¨æ©Ÿç”Ÿæˆçš„ ID ä½œç‚ºåç¨±ã€‚

ğŸ“ ç‰¹åˆ¥æ³¨æ„ã€Œ.ã€å°±ä»£è¡¨ **ç•¶å‰çš„ç›®éŒ„** æ‰€ä»¥åƒè¬ä¸å¯çœï¼

è‹¥æ˜¯æƒ³è¦å»ºç«‹ä¸€å€‹åç‚º myapp çš„ image ï¼Œå¯ä»¥ä½¿ç”¨

```docker
docker build --tag myapp .
```

æˆ–æ˜¯

```docker
docker build -t myapp .
```

é€™æœƒæ ¹æ“šç•¶å‰çš„ç›®éŒ„ä¸­å°‹æ‰¾åç‚º Dockerfile çš„æª”æ¡ˆï¼Œç„¶å¾Œä½¿ç”¨é€™å€‹ Dockerfile å»ºç«‹ä¸€å€‹åç‚º `myapp` çš„ Docker æ˜ åƒï¼ˆimageï¼‰ã€‚

ç•¶æˆ‘å€‘å»ºç«‹å®Œè‡ªå·±çš„ myapp é€™å€‹ image ä¸€å®šæœƒæƒ³æŸ¥çœ‹æˆ‘æœ¬åœ°æ˜¯å¦æœ‰ myapp é€™å€‹ image ï¼Œé€™æ™‚å¯ä»¥ä½¿ç”¨

```
docker images
```

å¯ä»¥åˆ—å‡ºæœ¬åœ°çš„æ‰€æœ‰ imagesã€‚

å†ä¾†å…©å€‹èªæ³•æ˜¯ï¼Œè‹¥ä½ æœƒä½¿ç”¨ git ç‰ˆæ§ä¸€å®šå¾ˆå¥½ç†è§£

```docker
docker pull <imagename>
```

å¾é ç«¯ registry (å€‰åº«)ä¸‹è¼‰ image (æ˜ åƒ)åˆ°æœ¬åœ°ã€‚

```docker
docker push <image>
```

å°‡æœ¬åœ°çš„ image (æ˜ åƒ)ä¸Šå‚³åˆ°é ç«¯ registry (å€‰åº«)ã€‚

ä»Šå¤©å…ˆä»‹ç´¹é€™äº›ä¸€å®šæœƒç”¨åˆ°çš„èªæ³•ï¼Œå¤§æ¦‚å¯ä»¥ä½¿ç”¨é€™äº›èªæ³•è‡ªå·±ç·´ç¿’æ‹‰å–ï¼Œæˆ–æ˜¯çœ‹çœ‹è‡ªå·±çš„ dockerï¼Œä¹‹å¾Œæœƒæ ¹æ“šé¡åˆ¥å†ä¸€ä¸€è©³ç´°ä»‹ç´¹ï¼Œé‚£å°±æ˜å¤©è¦‹ï¼
